{"version":3,"sources":["linework.min.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","Linework","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","value","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","_helpers","_point","LineworkCore","options","context","currentPosition","startPosition","debugMode","speed","queue","reset","bool","point","X","destination","Y","distance","distanceTo","moveByAngleAndDistance","angle","isAnimating","onComplete","dest","push","func","curPos","_func","enqueueDestination","animate","direction","degrees","enqueueFunction","nextPosition","beginPath","moveTo","x","y","lineTo","stroke","closePath","_this","step","getNextPosition","hasReachedDestination","isFunction","drawLineSegment","setTimeout","requestAnimationFrame","nextItem","shift","angleTo","./helpers","./point","2","toRadians","Math","PI","getDirection","isDefined","variable","undefined","isObject","_typeof","isNumber","isString","wrapAround","pos","innerWidth","innerHeight","Symbol","iterator","constructor","3","_core","_core2","_point2","arguments","defaults","mergedOptions","$","extend","core","setContext","setDebug","setPosition","newSpeed","setSpeed","drawLineTo","drawLineANgle","drawLineDirection","drawLineAngle","_distance","drawLineFunc","./core","4","Point","deg","atan2","sqrt","pow","angleInRadians","cos","sin","get"],"mappings":"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","file":"linework.min.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.Linework = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Linework's core methods\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * @since 0.0.1\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * @author Richard Tan <chardos@gmail.com>\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\n\nvar _helpers = require('./helpers');\n\nvar _point = require('./point');\n\nvar _point2 = _interopRequireDefault(_point);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar LineworkCore = function () {\n\t/**\n  * Linework core constructor\n  *\n  * @constructor\n  *\n  * @param {object} options\n  */\n\tfunction LineworkCore(options) {\n\t\t_classCallCheck(this, LineworkCore);\n\n\t\tthis.context = options.context;\n\t\tthis.currentPosition = options.startPosition;\n\t\tthis.debugMode = options.debugMode;\n\t\tthis.speed = options.speed;\n\n\t\tthis.queue = [];\n\t\tthis.reset();\n\t}\n\n\t_createClass(LineworkCore, [{\n\t\tkey: 'setContext',\n\t\tvalue: function setContext(context) {\n\t\t\tthis.context = context;\n\t\t}\n\t}, {\n\t\tkey: 'setDebug',\n\t\tvalue: function setDebug(bool) {\n\t\t\tthis.debugMode = bool;\n\t\t}\n\t}, {\n\t\tkey: 'setPosition',\n\t\tvalue: function setPosition(point) {\n\t\t\tthis.currentPosition = point;\n\t\t}\n\t}, {\n\t\tkey: 'setSpeed',\n\t\tvalue: function setSpeed(speed) {\n\t\t\tthis.speed = speed;\n\t\t}\n\t}, {\n\t\tkey: 'hasReachedDestination',\n\t\tvalue: function hasReachedDestination() {\n\t\t\treturn this.currentPosition.X === this.destination.X && this.currentPosition.Y === this.destination.Y;\n\t\t}\n\t}, {\n\t\tkey: 'getNextPosition',\n\t\tvalue: function getNextPosition() {\n\t\t\tvar distance = this.currentPosition.distanceTo(this.destination);\n\t\t\tif (distance <= this.speed) {\n\t\t\t\treturn this.destination;\n\t\t\t}\n\t\t\treturn this.currentPosition.moveByAngleAndDistance(this.angle, distance);\n\t\t}\n\t}, {\n\t\tkey: 'reset',\n\t\tvalue: function reset() {\n\t\t\tthis.isAnimating = false;\n\t\t\tthis.destination = this.currentPosition;\n\t\t\tthis.angle = 0;\n\t\t\tthis.onComplete = null;\n\t\t}\n\t}, {\n\t\tkey: 'enqueueDestination',\n\t\tvalue: function enqueueDestination(dest, onComplete) {\n\t\t\tthis.queue.push({\n\t\t\t\tfunc: function func(curPos) {\n\t\t\t\t\treturn dest;\n\t\t\t\t},\n\t\t\t\tonComplete: onComplete\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'enqueueFunction',\n\t\tvalue: function enqueueFunction(_func, onComplete) {\n\t\t\tthis.queue.push({\n\t\t\t\tfunc: function func(curPos) {\n\t\t\t\t\treturn _func(curPos);\n\t\t\t\t},\n\t\t\t\tonComplete: onComplete\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'drawLineTo',\n\t\tvalue: function drawLineTo(point, onComplete) {\n\t\t\tthis.enqueueDestination(point, onComplete);\n\t\t\tthis.animate();\n\t\t}\n\t}, {\n\t\tkey: 'drawLineDirection',\n\t\tvalue: function drawLineDirection(direction, distance, onComplete) {\n\t\t\tthrow new Error('TODO: not implemented error');\n\t\t}\n\t}, {\n\t\tkey: 'drawLineAngle',\n\t\tvalue: function drawLineAngle(degrees, distance, onComplete) {\n\t\t\tvar point = this.currentPosition.moveByAngleAndDistance(degrees, distance);\n\t\t\tthis.enqueueDestination(point, onComplete);\n\t\t\tthis.animate();\n\t\t}\n\t}, {\n\t\tkey: 'drawLineFunc',\n\t\tvalue: function drawLineFunc(func, onComplete) {\n\t\t\tthis.enqueueFunction(func, onComplete);\n\t\t\tthis.animate();\n\t\t}\n\t}, {\n\t\tkey: 'drawLineSegment',\n\t\tvalue: function drawLineSegment(nextPosition) {\n\t\t\tthis.context.beginPath();\n\t\t\tthis.context.moveTo(this.currentPosition.x, this.currentPosition.y);\n\t\t\tthis.context.lineTo(nextPosition.x, nextPosition.y);\n\t\t\tthis.context.stroke();\n\t\t\tthis.context.closePath();\n\t\t}\n\t}, {\n\t\tkey: 'animate',\n\t\tvalue: function animate() {\n\t\t\tvar _this = this;\n\n\t\t\tvar step = function step() {\n\t\t\t\tvar nextPosition = _this.getNextPosition();\n\t\t\t\tif (!_this.hasReachedDestination()) {\n\t\t\t\t\t_this.drawLineSegment(nextPosition);\n\t\t\t\t\t_this.currentPosition = nextPosition;\n\n\t\t\t\t\tif (!_this.debugMode) {\n\t\t\t\t\t\trequestAnimationFrame(step);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetTimeout(step, _this.speed);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif ((0, _helpers.isFunction)(_this.onComplete)) {\n\t\t\t\t\t\t_this.onComplete(_this.currentPosition);\n\t\t\t\t\t}\n\t\t\t\t\t_this.reset();\n\t\t\t\t\t_this.animate();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (!this.isAnimating && this.queue.length) {\n\t\t\t\tvar nextItem = this.queue.shift();\n\t\t\t\tthis.destination = nextItem.func(this.currentPosition);\n\t\t\t\tthis.angle = this.currentPosition.angleTo(this.destination);\n\t\t\t\tthis.onComplete = nextItem.onComplete;\n\t\t\t\tthis.isAnimating = true;\n\n\t\t\t\tstep();\n\t\t\t}\n\t\t}\n\t}]);\n\n\treturn LineworkCore;\n}();\n\nexports.default = LineworkCore;\n\n},{\"./helpers\":2,\"./point\":4}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n/**\n * Linework helper methods\n *\n * @since 0.0.1\n * @author Richard Tan <chardos@gmail.com>\n */\n\n\nexports.toRadians = toRadians;\nexports.getDirection = getDirection;\nexports.isDefined = isDefined;\nexports.isObject = isObject;\nexports.isNumber = isNumber;\nexports.isString = isString;\nexports.isFunction = isFunction;\nexports.wrapAround = wrapAround;\n\nvar _point = require('./point');\n\nvar _point2 = _interopRequireDefault(_point);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction toRadians(angle) {\n  return angle * Math.PI / 180;\n}\n\nfunction getDirection(angle) {\n  if (angle >= 225 && angle < 315) return 'up';\n  if (angle >= 315 || angle < 45) return 'right';\n  if (angle >= 45 && angle < 315) return 'down';\n  if (angle >= 135 && angle < 225) return 'left';\n\n  return 'unknown';\n}\n\nfunction isDefined(variable) {\n  return variable !== undefined && variable !== null;\n}\n\nfunction isObject(variable) {\n  return isDefined(variable) && (typeof variable === 'undefined' ? 'undefined' : _typeof(variable)) === 'object';\n}\n\nfunction isNumber(variable) {\n  return isDefined(variable) && typeof variable === 'number';\n}\n\nfunction isString(variable) {\n  return isDefined(variable) && typeof variable === 'string';\n}\n\nfunction isFunction(variable) {\n  return isDefined(variable) && typeof variable === 'function';\n}\n\n/**\n * Wrap position around the window if the position is outside of the windows bounds.\n *\n * @param {Point}\tpos\t\tPosition to check if it is within window's bounds\n *\n * @returns {Point} The new position\n */\nfunction wrapAround(pos) {\n  if (pos.x > window.innerWidth) {\n    pos.x = 0;\n  } else if (pos.x < 0) {\n    pos.x = window.innerWidth;\n  }\n  if (pos.y > window.innerHeight) {\n    pos.y = 0;\n  } else if (pos.y < 0) {\n    pos.y = window.innerHeight;\n  }\n  return pos;\n}\n\n},{\"./point\":4}],3:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Linework = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     * Linework - Public interface\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     * Desired API\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     * var line = new Linework()\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     * line.setPosition(x,y)\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     * line.drawLine(degrees, distance, callback)\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     * line.drawLineTo(x, y, speed(optional), callback(optional))\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     * line.turnLeft(degrees, distance)\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     * line.curveLeft(degrees, radius)\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     * line.drawCircle(degrees, radius)\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     * @since 0.0.1\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     * @author Richard Tan <chardos@gmail.com>\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     */\n\n\nvar _helpers = require('./helpers');\n\nvar _core = require('./core');\n\nvar _core2 = _interopRequireDefault(_core);\n\nvar _point = require('./point');\n\nvar _point2 = _interopRequireDefault(_point);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Linework = exports.Linework = function () {\n  /**\n   * Linework constructor\n   *\n   * @constructor\n   *\n   * @param {object} options  Default options\n   */\n  function Linework() {\n    var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    _classCallCheck(this, Linework);\n\n    var defaults = {\n      speed: 1,\n      context: null,\n      debugMode: false,\n      startPosition: new _point2.default(0, 0)\n    };\n    var mergedOptions = $.extend({}, defaults, options);\n\n    // Delegate the methods to another class to hide the methods from the public interface\n    this.core = new _core2.default(mergedOptions);\n  }\n\n  /**\n   * Set the canvas's context\n   *\n   * @param {object} context\n   *\n   * @return {Linework}\n   */\n\n\n  _createClass(Linework, [{\n    key: 'setContext',\n    value: function setContext(context) {\n      this.core.setContext(context);\n\n      return this;\n    }\n\n    /**\n     * Set debug mode\n     *\n     * @param {boolean} bool\n     *\n     * @return {Linework}\n     */\n\n  }, {\n    key: 'setDebug',\n    value: function setDebug(bool) {\n      this.core.setDebug(bool);\n\n      return this;\n    }\n\n    /**\n     * Set the current position\n     *\n     * @param {number} x\n     * @param {number} y\n     *\n     * @return {Linework}\n     */\n\n  }, {\n    key: 'setPosition',\n    value: function setPosition(x, y) {\n      var point = (0, _helpers.wrapAround)(new _point2.default(x, y));\n      this.core.setPosition(point);\n\n      return this;\n    }\n\n    /**\n     * Set the speed\n     *\n     * @param {number} newSpeed\n     *\n     * @return {Linework}\n     */\n\n  }, {\n    key: 'setSpeed',\n    value: function setSpeed(newSpeed) {\n      this.core.setSpeed(newSpeed);\n\n      return this;\n    }\n\n    /**\n     * Draw a line\n     *\n     * @param {...*} params - object - {x: number, y: number}\n     *                      - function - currentPosition => newPosition\n     *                      - string - direction\n     *                      - number - distance\n     *\n     * @return {Linework}\n     */\n\n  }, {\n    key: 'drawLine',\n    value: function drawLine() {\n      if (arguments.length === 0) {\n        throw new Error('TODO invalid argument error');\n      }\n\n      if ((0, _helpers.isObject)(arguments.length <= 0 ? undefined : arguments[0])) {\n        var obj = arguments.length <= 0 ? undefined : arguments[0];\n        if ((0, _helpers.isDefined)(obj.x) && (0, _helpers.isDefined)(obj.y)) {\n          this.core.drawLineTo(obj.x, obj.y, obj.onComplete);\n        } else if ((0, _helpers.isDefined)(obj.degrees) && (0, _helpers.isDefined)(obj.distance)) {\n          this.core.drawLineANgle(obj.degrees, obj.distance, obj.onComplete);\n        } else if ((0, _helpers.isDefined)(obj.direction) && (0, _helpers.isDefined)(obj.distance)) {\n          this.core.drawLineDirection(obj.direction, obj.distance, obj.onComplete);\n        } else {\n          throw new Error('TODO Object incorrect format error');\n        }\n      } else if ((0, _helpers.isNumber)(arguments.length <= 0 ? undefined : arguments[0]) && (0, _helpers.isNumber)(arguments.length <= 1 ? undefined : arguments[1])) {\n        var degrees = arguments.length <= 0 ? undefined : arguments[0];\n        var distance = arguments.length <= 1 ? undefined : arguments[1];\n\n        this.core.drawLineAngle(degrees, distance);\n      } else if ((0, _helpers.isString)(arguments.length <= 0 ? undefined : arguments[0]) && (0, _helpers.isNumber)(arguments.length <= 1 ? undefined : arguments[1])) {\n        var direction = arguments.length <= 0 ? undefined : arguments[0];\n        var _distance = arguments.length <= 1 ? undefined : arguments[1];\n\n        this.core.drawLineDirection(direction, _distance);\n      } else if ((0, _helpers.isFunction)(arguments.length <= 0 ? undefined : arguments[0])) {\n        this.core.drawLineFunc(arguments.length <= 0 ? undefined : arguments[0]);\n      } else {\n        throw new Error('TODO another invalid argument error');\n      }\n\n      return this;\n    }\n  }, {\n    key: 'drawCurve',\n    value: function drawCurve() {\n      throw new Error('Not implemented error');\n    }\n  }, {\n    key: 'drawCircle',\n    value: function drawCircle() {\n      throw new Error('Not implemented error');\n    }\n  }]);\n\n  return Linework;\n}();\n\n},{\"./core\":1,\"./helpers\":2,\"./point\":4}],4:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Point on the cartisian plane\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * @since 0.0.1\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * @author Richard Tan <chardos@gmail.com>\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\n\nvar _helpers = require('./helpers');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Point = function () {\n  function Point(x, y) {\n    _classCallCheck(this, Point);\n\n    this.x = x;\n    this.y = y;\n  }\n\n  _createClass(Point, [{\n    key: 'angleTo',\n    value: function angleTo(point) {\n      var deg = Math.atan2(point.Y - this.Y, point.X - this.X) * 180 / Math.PI;\n      if (deg < 0) return deg + 360;\n      return deg;\n    }\n  }, {\n    key: 'distanceTo',\n    value: function distanceTo(point) {\n      return Math.sqrt(Math.pow(point.X - this.X, 2) + Math.pow(point.Y - this.Y, 2));\n    }\n  }, {\n    key: 'moveByAngleAndDistance',\n    value: function moveByAngleAndDistance(angle, distance) {\n      var angleInRadians = (0, _helpers.toRadians)(angle);\n      return new Point(this.x + Math.cos(angleInRadians) * distance, this.y + Math.sin(angleInRadians) * distance);\n    }\n  }, {\n    key: 'X',\n    get: function get() {\n      return this.x;\n    }\n  }, {\n    key: 'Y',\n    get: function get() {\n      return this.y;\n    }\n  }]);\n\n  return Point;\n}();\n\nexports.default = Point;\n\n},{\"./helpers\":2}]},{},[3])(3)\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJqc1xcbGluZXdvcmtcXGNvcmUuanMiLCJqc1xcbGluZXdvcmtcXGhlbHBlcnMuanMiLCJqc1xcbGluZXdvcmtcXGxpbmV3b3JrLmpzIiwianNcXGxpbmV3b3JrXFxwb2ludC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7OztxakJDQUE7Ozs7Ozs7O0FBTUE7O0FBQ0E7Ozs7Ozs7O0lBRXFCLFk7QUFDcEI7Ozs7Ozs7QUFPQSx1QkFBWSxPQUFaLEVBQXFCO0FBQUE7O0FBQ3BCLE9BQUssT0FBTCxHQUFlLFFBQVEsT0FBdkI7QUFDRSxPQUFLLGVBQUwsR0FBdUIsUUFBUSxhQUEvQjtBQUNGLE9BQUssU0FBTCxHQUFpQixRQUFRLFNBQXpCO0FBQ0EsT0FBSyxLQUFMLEdBQWEsUUFBUSxLQUFyQjs7QUFFQSxPQUFLLEtBQUwsR0FBYSxFQUFiO0FBQ0EsT0FBSyxLQUFMO0FBQ0E7Ozs7NkJBRVUsTyxFQUFTO0FBQ25CLFFBQUssT0FBTCxHQUFlLE9BQWY7QUFDQTs7OzJCQUVRLEksRUFBTTtBQUNkLFFBQUssU0FBTCxHQUFpQixJQUFqQjtBQUNBOzs7OEJBRVcsSyxFQUFPO0FBQ2xCLFFBQUssZUFBTCxHQUF1QixLQUF2QjtBQUNBOzs7MkJBRVEsSyxFQUFPO0FBQ2YsUUFBSyxLQUFMLEdBQWEsS0FBYjtBQUNBOzs7MENBRXVCO0FBQ3ZCLFVBQU8sS0FBSyxlQUFMLENBQXFCLENBQXJCLEtBQTJCLEtBQUssV0FBTCxDQUFpQixDQUE1QyxJQUNGLEtBQUssZUFBTCxDQUFxQixDQUFyQixLQUEyQixLQUFLLFdBQUwsQ0FBaUIsQ0FEakQ7QUFFQTs7O29DQUVpQjtBQUNoQixPQUFNLFdBQVcsS0FBSyxlQUFMLENBQXFCLFVBQXJCLENBQWdDLEtBQUssV0FBckMsQ0FBakI7QUFDQSxPQUFJLFlBQVksS0FBSyxLQUFyQixFQUE0QjtBQUMzQixXQUFPLEtBQUssV0FBWjtBQUNB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Q0FBTixHQUFVLEtBQUssQ0FBeEIsRUFBMkIsQ0FBM0IsQ0FBMUMsQ0FBUDtBQUNEOzs7MkNBRXNCLEssRUFBTyxRLEVBQVU7QUFDdEMsVUFBTSxpQkFBaUIsd0JBQVUsS0FBVixDQUF2QjtBQUNBLGFBQU8sSUFBSSxLQUFKLENBQ0wsS0FBSyxDQUFMLEdBQVMsS0FBSyxHQUFMLENBQVMsY0FBVCxJQUEyQixRQUQvQixFQUVMLEtBQUssQ0FBTCxHQUFTLEtBQUssR0FBTCxDQUFTLGNBQVQsSUFBMkIsUUFGL0IsQ0FBUDtBQUlEOzs7d0JBeEJPO0FBQ04sYUFBTyxLQUFLLENBQVo7QUFDRDs7O3dCQUVPO0FBQ04sYUFBTyxLQUFLLENBQVo7QUFDRDs7Ozs7O2tCQVprQixLIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIi8qKlxuICogTGluZXdvcmsncyBjb3JlIG1ldGhvZHNcbiAqXG4gKiBAc2luY2UgMC4wLjFcbiAqIEBhdXRob3IgUmljaGFyZCBUYW4gPGNoYXJkb3NAZ21haWwuY29tPlxuICovXG5pbXBvcnQgeyBpc0Z1bmN0aW9uIH0gZnJvbSAnLi9oZWxwZXJzJztcbmltcG9ydCBQb2ludCBmcm9tICcuL3BvaW50JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGluZXdvcmtDb3JlIHtcblx0LyoqXG5cdCAqIExpbmV3b3JrIGNvcmUgY29uc3RydWN0b3Jcblx0ICpcblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqXG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zXG5cdCAqL1xuXHRjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG5cdFx0dGhpcy5jb250ZXh0ID0gb3B0aW9ucy5jb250ZXh0O1xuICAgIHRoaXMuY3VycmVudFBvc2l0aW9uID0gb3B0aW9ucy5zdGFydFBvc2l0aW9uO1xuXHRcdHRoaXMuZGVidWdNb2RlID0gb3B0aW9ucy5kZWJ1Z01vZGU7XG5cdFx0dGhpcy5zcGVlZCA9IG9wdGlvbnMuc3BlZWQ7XG5cblx0XHR0aGlzLnF1ZXVlID0gW107XG5cdFx0dGhpcy5yZXNldCgpO1xuXHR9XG5cblx0c2V0Q29udGV4dChjb250ZXh0KSB7XG5cdFx0dGhpcy5jb250ZXh0ID0gY29udGV4dDtcblx0fVxuXG5cdHNldERlYnVnKGJvb2wpIHtcblx0XHR0aGlzLmRlYnVnTW9kZSA9IGJvb2w7XG5cdH1cblxuXHRzZXRQb3NpdGlvbihwb2ludCkge1xuXHRcdHRoaXMuY3VycmVudFBvc2l0aW9uID0gcG9pbnQ7XG5cdH1cblxuXHRzZXRTcGVlZChzcGVlZCkge1xuXHRcdHRoaXMuc3BlZWQgPSBzcGVlZDtcblx0fVxuXG5cdGhhc1JlYWNoZWREZXN0aW5hdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5jdXJyZW50UG9zaXRpb24uWCA9PT0gdGhpcy5kZXN0aW5hdGlvbi5YXG5cdFx0XHRcdCYmIHRoaXMuY3VycmVudFBvc2l0aW9uLlkgPT09IHRoaXMuZGVzdGluYXRpb24uWTtcblx0fVxuXG5cdGdldE5leHRQb3NpdGlvbigpIHtcblx0XHRcdGNvbnN0IGRpc3RhbmNlID0gdGhpcy5jdXJyZW50UG9zaXRpb24uZGlzdGFuY2VUbyh0aGlzLmRlc3RpbmF0aW9uKTtcblx0XHRcdGlmIChkaXN0YW5jZSA8PSB0aGlzLnNwZWVkKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLmRlc3RpbmF0aW9uO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRoaXMuY3VycmVudFBvc2l0aW9uLm1vdmVCeUFuZ2xlQW5kRGlzdGFuY2UodGhpcy5hbmdsZSwgZGlzdGFuY2UpO1xuXHR9XG5cblx0cmVzZXQoKSB7XG5cdFx0dGhpcy5pc0FuaW1hdGluZyA9IGZhbHNlO1xuXHRcdHRoaXMuZGVzdGluYXRpb24gPSB0aGlzLmN1cnJlbnRQb3NpdGlvbjtcblx0XHR0aGlzLmFuZ2xlID0gMDtcblx0XHR0aGlzLm9uQ29tcGxldGUgPSBudWxsO1xuXHR9XG5cblx0ZW5xdWV1ZURlc3RpbmF0aW9uKGRlc3QsIG9uQ29tcGxldGUpIHtcblx0XHR0aGlzLnF1ZXVlLnB1c2goe1xuXHRcdFx0ZnVuYzogY3VyUG9zID0+IGRlc3QsXG5cdFx0XHRvbkNvbXBsZXRlXG5cdFx0fSk7XG5cdH1cblxuXHRlbnF1ZXVlRnVuY3Rpb24oZnVuYywgb25Db21wbGV0ZSkge1xuXHRcdHRoaXMucXVldWUucHVzaCh7XG5cdFx0XHRmdW5jOiBjdXJQb3MgPT4gZnVuYyhjdXJQb3MpLFxuXHRcdFx0b25Db21wbGV0ZVxuXHRcdH0pO1xuXHR9XG5cblx0ZHJhd0xpbmVUbyhwb2ludCwgb25Db21wbGV0ZSkge1xuXHRcdHRoaXMuZW5xdWV1ZURlc3RpbmF0aW9uKHBvaW50LCBvbkNvbXBsZXRlKTtcblx0XHR0aGlzLmFuaW1hdGUoKTtcblx0fVxuXG5cdGRyYXdMaW5lRGlyZWN0aW9uKGRpcmVjdGlvbiwgZGlzdGFuY2UsIG9uQ29tcGxldGUpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoJ1RPRE86IG5vdCBpbXBsZW1lbnRlZCBlcnJvcicpO1xuXHR9XG5cblx0ZHJhd0xpbmVBbmdsZShkZWdyZWVzLCBkaXN0YW5jZSwgb25Db21wbGV0ZSkge1xuXHRcdGNvbnN0IHBvaW50ID0gdGhpcy5jdXJyZW50UG9zaXRpb24ubW92ZUJ5QW5nbGVBbmREaXN0YW5jZShkZWdyZWVzLCBkaXN0YW5jZSk7XG5cdFx0dGhpcy5lbnF1ZXVlRGVzdGluYXRpb24ocG9pbnQsIG9uQ29tcGxldGUpO1xuXHRcdHRoaXMuYW5pbWF0ZSgpO1xuXHR9XG5cblx0ZHJhd0xpbmVGdW5jKGZ1bmMsIG9uQ29tcGxldGUpIHtcblx0XHR0aGlzLmVucXVldWVGdW5jdGlvbihmdW5jLCBvbkNvbXBsZXRlKTtcblx0XHR0aGlzLmFuaW1hdGUoKTtcblx0fVxuXG5cdGRyYXdMaW5lU2VnbWVudChuZXh0UG9zaXRpb24pIHtcblx0XHR0aGlzLmNvbnRleHQuYmVnaW5QYXRoKCk7XG5cdFx0dGhpcy5jb250ZXh0Lm1vdmVUbyh0aGlzLmN1cnJlbnRQb3NpdGlvbi54LCB0aGlzLmN1cnJlbnRQb3NpdGlvbi55KTtcblx0XHR0aGlzLmNvbnRleHQubGluZVRvKG5leHRQb3NpdGlvbi54LCBuZXh0UG9zaXRpb24ueSk7XG5cdFx0dGhpcy5jb250ZXh0LnN0cm9rZSgpO1xuXHRcdHRoaXMuY29udGV4dC5jbG9zZVBhdGgoKTtcblx0fVxuXG5cdGFuaW1hdGUoKSB7XG5cdFx0Y29uc3Qgc3RlcCA9ICgpID0+IHtcblx0XHRcdGNvbnN0IG5leHRQb3NpdGlvbiA9IHRoaXMuZ2V0TmV4dFBvc2l0aW9uKCk7XG5cdFx0XHRpZiAoIXRoaXMuaGFzUmVhY2hlZERlc3RpbmF0aW9uKCkpIHtcblx0XHRcdFx0dGhpcy5kcmF3TGluZVNlZ21lbnQobmV4dFBvc2l0aW9uKTtcblx0XHRcdFx0dGhpcy5jdXJyZW50UG9zaXRpb24gPSBuZXh0UG9zaXRpb247XG5cblx0XHRcdFx0aWYgKCF0aGlzLmRlYnVnTW9kZSkge1xuXHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZShzdGVwKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRzZXRUaW1lb3V0KHN0ZXAsIHRoaXMuc3BlZWQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZiAoaXNGdW5jdGlvbih0aGlzLm9uQ29tcGxldGUpKSB7XG5cdFx0XHRcdFx0dGhpcy5vbkNvbXBsZXRlKHRoaXMuY3VycmVudFBvc2l0aW9uKTtcblx0XHRcdFx0fVxuXHRcdFx0XHR0aGlzLnJlc2V0KCk7XG5cdFx0XHRcdHRoaXMuYW5pbWF0ZSgpO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRpZiAoIXRoaXMuaXNBbmltYXRpbmcgJiYgdGhpcy5xdWV1ZS5sZW5ndGgpIHtcblx0XHRcdGNvbnN0IG5leHRJdGVtID0gdGhpcy5xdWV1ZS5zaGlmdCgpO1xuXHRcdFx0dGhpcy5kZXN0aW5hdGlvbiA9IG5leHRJdGVtLmZ1bmModGhpcy5jdXJyZW50UG9zaXRpb24pO1xuXHRcdFx0dGhpcy5hbmdsZSA9IHRoaXMuY3VycmVudFBvc2l0aW9uLmFuZ2xlVG8odGhpcy5kZXN0aW5hdGlvbik7XG5cdFx0XHR0aGlzLm9uQ29tcGxldGUgPSBuZXh0SXRlbS5vbkNvbXBsZXRlO1xuXHRcdFx0dGhpcy5pc0FuaW1hdGluZyA9IHRydWU7XG5cblx0XHRcdHN0ZXAoKTtcblx0XHR9XG5cdH1cbn1cbiIsIlxuLyoqXG4gKiBMaW5ld29yayBoZWxwZXIgbWV0aG9kc1xuICpcbiAqIEBzaW5jZSAwLjAuMVxuICogQGF1dGhvciBSaWNoYXJkIFRhbiA8Y2hhcmRvc0BnbWFpbC5jb20+XG4gKi9cbmltcG9ydCBQb2ludCBmcm9tICcuL3BvaW50JztcblxuZXhwb3J0IGZ1bmN0aW9uIHRvUmFkaWFucyhhbmdsZSkge1xuICByZXR1cm4gYW5nbGUgKiBNYXRoLlBJIC8gMTgwO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGlyZWN0aW9uKGFuZ2xlKSB7XG4gIGlmIChhbmdsZSA+PSAyMjUgJiYgYW5nbGUgPCAzMTUpIHJldHVybiAndXAnO1xuICBpZiAoYW5nbGUgPj0gMzE1IHx8IGFuZ2xlIDwgNDUpIHJldHVybiAncmlnaHQnO1xuICBpZiAoYW5nbGUgPj0gNDUgJiYgYW5nbGUgPCAzMTUpIHJldHVybiAnZG93bic7XG4gIGlmIChhbmdsZSA+PSAxMzUgJiYgYW5nbGUgPCAyMjUpIHJldHVybiAnbGVmdCc7XG5cbiAgcmV0dXJuICd1bmtub3duJztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRGVmaW5lZCh2YXJpYWJsZSkge1xuICByZXR1cm4gdmFyaWFibGUgIT09IHVuZGVmaW5lZCAmJiB2YXJpYWJsZSAhPT0gbnVsbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzT2JqZWN0KHZhcmlhYmxlKSB7XG4gIHJldHVybiBpc0RlZmluZWQodmFyaWFibGUpICYmIHR5cGVvZiB2YXJpYWJsZSA9PT0gJ29iamVjdCc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc051bWJlcih2YXJpYWJsZSkge1xuICByZXR1cm4gaXNEZWZpbmVkKHZhcmlhYmxlKSAmJiB0eXBlb2YgdmFyaWFibGUgPT09ICdudW1iZXInO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNTdHJpbmcodmFyaWFibGUpIHtcbiAgcmV0dXJuIGlzRGVmaW5lZCh2YXJpYWJsZSkgJiYgdHlwZW9mIHZhcmlhYmxlID09PSAnc3RyaW5nJztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRnVuY3Rpb24odmFyaWFibGUpIHtcbiAgcmV0dXJuIGlzRGVmaW5lZCh2YXJpYWJsZSkgJiYgdHlwZW9mIHZhcmlhYmxlID09PSAnZnVuY3Rpb24nO1xufVxuXG4vKipcbiAqIFdyYXAgcG9zaXRpb24gYXJvdW5kIHRoZSB3aW5kb3cgaWYgdGhlIHBvc2l0aW9uIGlzIG91dHNpZGUgb2YgdGhlIHdpbmRvd3MgYm91bmRzLlxuICpcbiAqIEBwYXJhbSB7UG9pbnR9XHRwb3NcdFx0UG9zaXRpb24gdG8gY2hlY2sgaWYgaXQgaXMgd2l0aGluIHdpbmRvdydzIGJvdW5kc1xuICpcbiAqIEByZXR1cm5zIHtQb2ludH0gVGhlIG5ldyBwb3NpdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gd3JhcEFyb3VuZChwb3MpIHtcblx0aWYgKHBvcy54ID4gd2luZG93LmlubmVyV2lkdGgpIHtcblx0XHRwb3MueCA9IDA7XG5cdH0gZWxzZSBpZiAocG9zLnggPCAwKSB7XG5cdFx0cG9zLnggPSB3aW5kb3cuaW5uZXJXaWR0aDtcblx0fVxuXHRpZiAocG9zLnkgPiB3aW5kb3cuaW5uZXJIZWlnaHQpIHtcblx0XHRwb3MueSA9IDA7XG5cdH0gZWxzZSBpZiAocG9zLnkgPCAwKSB7XG5cdFx0cG9zLnkgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG5cdH1cblx0cmV0dXJuIHBvcztcbn1cbiIsIi8qKlxuKiBMaW5ld29yayAtIFB1YmxpYyBpbnRlcmZhY2VcbipcbiogRGVzaXJlZCBBUElcbiogdmFyIGxpbmUgPSBuZXcgTGluZXdvcmsoKVxuKiBsaW5lLnNldFBvc2l0aW9uKHgseSlcbiogbGluZS5kcmF3TGluZShkZWdyZWVzLCBkaXN0YW5jZSwgY2FsbGJhY2spXG4qIGxpbmUuZHJhd0xpbmVUbyh4LCB5LCBzcGVlZChvcHRpb25hbCksIGNhbGxiYWNrKG9wdGlvbmFsKSlcbiogbGluZS50dXJuTGVmdChkZWdyZWVzLCBkaXN0YW5jZSlcbiogbGluZS5jdXJ2ZUxlZnQoZGVncmVlcywgcmFkaXVzKVxuKiBsaW5lLmRyYXdDaXJjbGUoZGVncmVlcywgcmFkaXVzKVxuKlxuKiBAc2luY2UgMC4wLjFcbiogQGF1dGhvciBSaWNoYXJkIFRhbiA8Y2hhcmRvc0BnbWFpbC5jb20+XG4qL1xuaW1wb3J0IHtpc0RlZmluZWQsIGlzT2JqZWN0LCBpc051bWJlciwgaXNTdHJpbmcsIGlzRnVuY3Rpb24sIHdyYXBBcm91bmR9IGZyb20gJy4vaGVscGVycyc7XG5pbXBvcnQgTGluZXdvcmtDb3JlIGZyb20gJy4vY29yZSc7XG5pbXBvcnQgUG9pbnQgZnJvbSAnLi9wb2ludCc7XG5cbmV4cG9ydCBjbGFzcyBMaW5ld29yayB7XG4gIC8qKlxuICAgKiBMaW5ld29yayBjb25zdHJ1Y3RvclxuICAgKlxuICAgKiBAY29uc3RydWN0b3JcbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMgIERlZmF1bHQgb3B0aW9uc1xuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgZGVmYXVsdHMgPSB7XG4gICAgICBzcGVlZDogICAgICAgICAxLFxuICAgICAgY29udGV4dDogICAgICAgbnVsbCxcbiAgICAgIGRlYnVnTW9kZTogICAgIGZhbHNlLFxuICAgICAgc3RhcnRQb3NpdGlvbjogbmV3IFBvaW50KDAsIDApLFxuICAgIH07XG4gICAgY29uc3QgbWVyZ2VkT3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBkZWZhdWx0cywgb3B0aW9ucyk7XG5cbiAgICAvLyBEZWxlZ2F0ZSB0aGUgbWV0aG9kcyB0byBhbm90aGVyIGNsYXNzIHRvIGhpZGUgdGhlIG1ldGhvZHMgZnJvbSB0aGUgcHVibGljIGludGVyZmFjZVxuICAgIHRoaXMuY29yZSA9IG5ldyBMaW5ld29ya0NvcmUobWVyZ2VkT3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBjYW52YXMncyBjb250ZXh0XG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjb250ZXh0XG4gICAqXG4gICAqIEByZXR1cm4ge0xpbmV3b3JrfVxuICAgKi9cbiAgc2V0Q29udGV4dChjb250ZXh0KSB7XG4gICAgdGhpcy5jb3JlLnNldENvbnRleHQoY29udGV4dCk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgZGVidWcgbW9kZVxuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGJvb2xcbiAgICpcbiAgICogQHJldHVybiB7TGluZXdvcmt9XG4gICAqL1xuICBzZXREZWJ1Zyhib29sKSB7XG4gICAgdGhpcy5jb3JlLnNldERlYnVnKGJvb2wpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBjdXJyZW50IHBvc2l0aW9uXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4XG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5XG4gICAqXG4gICAqIEByZXR1cm4ge0xpbmV3b3JrfVxuICAgKi9cbiAgc2V0UG9zaXRpb24oeCwgeSkge1xuICAgIGNvbnN0IHBvaW50ID0gd3JhcEFyb3VuZChuZXcgUG9pbnQoeCwgeSkpO1xuICAgIHRoaXMuY29yZS5zZXRQb3NpdGlvbihwb2ludCk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHNwZWVkXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBuZXdTcGVlZFxuICAgKlxuICAgKiBAcmV0dXJuIHtMaW5ld29ya31cbiAgICovXG4gIHNldFNwZWVkKG5ld1NwZWVkKSB7XG4gICAgdGhpcy5jb3JlLnNldFNwZWVkKG5ld1NwZWVkKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIERyYXcgYSBsaW5lXG4gICAqXG4gICAqIEBwYXJhbSB7Li4uKn0gcGFyYW1zIC0gb2JqZWN0IC0ge3g6IG51bWJlciwgeTogbnVtYmVyfVxuICAgKiAgICAgICAgICAgICAgICAgICAgICAtIGZ1bmN0aW9uIC0gY3VycmVudFBvc2l0aW9uID0+IG5ld1Bvc2l0aW9uXG4gICAqICAgICAgICAgICAgICAgICAgICAgIC0gc3RyaW5nIC0gZGlyZWN0aW9uXG4gICAqICAgICAgICAgICAgICAgICAgICAgIC0gbnVtYmVyIC0gZGlzdGFuY2VcbiAgICpcbiAgICogQHJldHVybiB7TGluZXdvcmt9XG4gICAqL1xuICBkcmF3TGluZSguLi5wYXJhbXMpIHtcbiAgICBpZiAocGFyYW1zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdUT0RPIGludmFsaWQgYXJndW1lbnQgZXJyb3InKTtcbiAgICB9XG5cbiAgICBpZiAoaXNPYmplY3QocGFyYW1zWzBdKSkge1xuICAgICAgY29uc3Qgb2JqID0gcGFyYW1zWzBdO1xuICAgICAgaWYgKGlzRGVmaW5lZChvYmoueCkgJiYgaXNEZWZpbmVkKG9iai55KSkge1xuICAgICAgICB0aGlzLmNvcmUuZHJhd0xpbmVUbyhvYmoueCwgb2JqLnksIG9iai5vbkNvbXBsZXRlKTtcbiAgICAgIH0gZWxzZSBpZiAoaXNEZWZpbmVkKG9iai5kZWdyZWVzKSAmJiBpc0RlZmluZWQob2JqLmRpc3RhbmNlKSkge1xuICAgICAgICB0aGlzLmNvcmUuZHJhd0xpbmVBTmdsZShvYmouZGVncmVlcywgb2JqLmRpc3RhbmNlLCBvYmoub25Db21wbGV0ZSk7XG4gICAgICB9IGVsc2UgaWYgKGlzRGVmaW5lZChvYmouZGlyZWN0aW9uKSAmJiBpc0RlZmluZWQob2JqLmRpc3RhbmNlKSkge1xuICAgICAgICB0aGlzLmNvcmUuZHJhd0xpbmVEaXJlY3Rpb24ob2JqLmRpcmVjdGlvbiwgb2JqLmRpc3RhbmNlLCBvYmoub25Db21wbGV0ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RPRE8gT2JqZWN0IGluY29ycmVjdCBmb3JtYXQgZXJyb3InKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGlzTnVtYmVyKHBhcmFtc1swXSkgJiYgaXNOdW1iZXIocGFyYW1zWzFdKSkge1xuICAgICAgY29uc3QgZGVncmVlcyA9IHBhcmFtc1swXTtcbiAgICAgIGNvbnN0IGRpc3RhbmNlID0gcGFyYW1zWzFdO1xuXG4gICAgICB0aGlzLmNvcmUuZHJhd0xpbmVBbmdsZShkZWdyZWVzLCBkaXN0YW5jZSk7XG4gICAgfSBlbHNlIGlmIChpc1N0cmluZyhwYXJhbXNbMF0pICYmIGlzTnVtYmVyKHBhcmFtc1sxXSkpIHtcbiAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IHBhcmFtc1swXTtcbiAgICAgIGNvbnN0IGRpc3RhbmNlID0gcGFyYW1zWzFdO1xuXG4gICAgICB0aGlzLmNvcmUuZHJhd0xpbmVEaXJlY3Rpb24oZGlyZWN0aW9uLCBkaXN0YW5jZSk7XG4gICAgfSBlbHNlIGlmIChpc0Z1bmN0aW9uKHBhcmFtc1swXSkpIHtcbiAgICAgIHRoaXMuY29yZS5kcmF3TGluZUZ1bmMocGFyYW1zWzBdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdUT0RPIGFub3RoZXIgaW52YWxpZCBhcmd1bWVudCBlcnJvcicpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgZHJhd0N1cnZlKC4uLnBhcmFtcykge1xuICAgIHRocm93IG5ldyBFcnJvcignTm90IGltcGxlbWVudGVkIGVycm9yJyk7XG4gIH1cblxuICBkcmF3Q2lyY2xlKC4uLnBhcmFtcykge1xuICAgIHRocm93IG5ldyBFcnJvcignTm90IGltcGxlbWVudGVkIGVycm9yJyk7XG4gIH1cbn1cbiIsIi8qKlxuICogUG9pbnQgb24gdGhlIGNhcnRpc2lhbiBwbGFuZVxuICogQHNpbmNlIDAuMC4xXG4gKiBAYXV0aG9yIFJpY2hhcmQgVGFuIDxjaGFyZG9zQGdtYWlsLmNvbT5cbiAqL1xuIGltcG9ydCB7IHRvUmFkaWFucyB9IGZyb20gJy4vaGVscGVycyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvaW50IHtcbiAgY29uc3RydWN0b3IoeCwgeSkge1xuICAgIHRoaXMueCA9IHg7XG4gICAgdGhpcy55ID0geTtcbiAgfVxuXG4gIGdldCBYKCkge1xuICAgIHJldHVybiB0aGlzLng7XG4gIH1cblxuICBnZXQgWSgpIHtcbiAgICByZXR1cm4gdGhpcy55O1xuICB9XG5cbiAgYW5nbGVUbyhwb2ludCkge1xuICAgIGNvbnN0IGRlZyA9IE1hdGguYXRhbjIocG9pbnQuWSAtIHRoaXMuWSwgcG9pbnQuWCAtIHRoaXMuWCkgKiAxODAgLyBNYXRoLlBJO1xuICBcdGlmIChkZWcgPCAwKSByZXR1cm4gZGVnICsgMzYwO1xuICBcdHJldHVybiBkZWc7XG4gIH1cblxuICBkaXN0YW5jZVRvKHBvaW50KSB7XG4gICAgcmV0dXJuIE1hdGguc3FydChNYXRoLnBvdyhwb2ludC5YIC0gdGhpcy5YLCAyKSArIE1hdGgucG93KHBvaW50LlkgLSB0aGlzLlksIDIpKTtcbiAgfVxuXG4gIG1vdmVCeUFuZ2xlQW5kRGlzdGFuY2UoYW5nbGUsIGRpc3RhbmNlKSB7XG4gICAgY29uc3QgYW5nbGVJblJhZGlhbnMgPSB0b1JhZGlhbnMoYW5nbGUpO1xuICAgIHJldHVybiBuZXcgUG9pbnQoXG4gICAgICB0aGlzLnggKyBNYXRoLmNvcyhhbmdsZUluUmFkaWFucykgKiBkaXN0YW5jZSxcbiAgICAgIHRoaXMueSArIE1hdGguc2luKGFuZ2xlSW5SYWRpYW5zKSAqIGRpc3RhbmNlXG4gICAgKTtcbiAgfVxufVxuIl19\n"],"sourceRoot":"/source/"}